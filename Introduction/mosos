# Ð˜ÐÐ¡Ð¢Ð Ð£ÐšÐ¦Ð˜Ð¯ Ð”Ð›Ð¯ Ð£Ð¡Ð¢ÐÐÐžÐ’ÐšÐ˜ Ð˜ ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð¡ÐŸÐž APACHE NiFi (Ð²ÐµÑ€ÑÐ¸Ñ 2.5.0)

### 1.1 ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚

Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸, Ñ€Ð°ÑÐ¿Ð°ÐºÐ¾Ð²ÐºÐ¸ Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¹:

~~~bash
# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
sudo zypper refresh
sudo zypper update -y

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð±Ð°Ð·Ð¾Ð²Ñ‹Ñ… ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚
sudo zypper install -y wget unzip tar gzip nano curl procps
~~~

> ðŸ’¡ **ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:**  
> - Ð’ ÐœÐžÐ¡.ÐžÐ¡ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð¿Ð°ÐºÐµÑ‚Ð½Ñ‹Ð¹ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€ `zypper` (Ð°Ð½Ð°Ð»Ð¾Ð³ `dnf` Ð² RHEL Ð¸Ð»Ð¸ `apt` Ð² Debian).  
> - Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ `nano`, `wget`, `unzip` â€” Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹ Ð´Ð»Ñ ÑÐºÐ°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ Ð´Ð¸ÑÑ‚Ñ€Ð¸Ð±ÑƒÑ‚Ð¸Ð²Ð° Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð².


### 1.3 Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° OpenJDK 21

Apache NiFi 2.5.0 Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ **Java 21**. Ð’ ÑÐ¸ÑÑ‚ÐµÐ¼Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð¿Ð°ÐºÐµÑ‚ `java-21-openjdk` Ð¸Ð· Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ.

#### 1. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ ÑÐ¿Ð¸ÑÐ¾Ðº Ð¿Ð°ÐºÐµÑ‚Ð¾Ð²

```bash
sudo zypper refresh
```

#### 2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ OpenJDK 21

Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ:
- `java-21-openjdk-headless` â€” JVM Ð±ÐµÐ· GUI
- `java-21-openjdk-devel` â€” Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ (javac, jstat Ð¸ Ð´Ñ€.)

```bash
sudo zypper install java-21-openjdk-devel java-21-openjdk-headless
```

> ðŸ’¡ ÐŸÐ°ÐºÐµÑ‚Ñ‹ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ‹ Ð² Ñ€Ð°Ð¼ÐºÐ°Ñ… **ÐÐ¢ (ÐÑÑ‚Ñ€Ð° Ð¢ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¸)** â€” Ð²ÐµÑ€ÑÐ¸Ñ `21.0.3.0-at154.1.1`.

#### 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ

```bash
java -version
javac -version
```

ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´:
```
openjdk version "21.0.3" 2024-04-16
OpenJDK Runtime Environment AstraLinux (build 21.0.3+0-154)
OpenJDK 64-Bit Server VM AstraLinux (build 21.0.3+0-154, mixed mode)
```

#### 4. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° JAVA_HOME

ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð¿ÑƒÑ‚ÑŒ Ðº JDK:

```bash
readlink -f $(which java)
# ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð²Ñ‹Ð²Ð¾Ð´Ð°: /usr/lib64/jvm/java-21-openjdk/bin/java
```

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³ ÐºÐ°Ðº `JAVA_HOME`.

Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ:

```bash
sudo nano /etc/profile.d/java.sh
```

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ:

```bash
export JAVA_HOME=/usr/lib64/jvm/java-21-openjdk
export PATH=$JAVA_HOME/bin:$PATH
```

ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚Ðµ:

```bash
source /etc/profile.d/java.sh
```

> âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ:
> ```bash
> echo $JAVA_HOME
> ```
